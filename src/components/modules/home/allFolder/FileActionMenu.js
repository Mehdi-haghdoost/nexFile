import useModalStore from '@/store/modalStore';
import React, { useEffect, useRef, useState } from 'react'

const FileActionMenu = ({ fileName, onClose }) => {

    const [isOpen, setIsOpen] = useState(false);
    const menuRef = useRef(null);
    const { openModal } = useModalStore();

    const toggleMenu = () => {
        setIsOpen(!isOpen);
    };

    //بستن منو با کلیک بر روی مکانی خارج از آن
    useEffect(() => {
        const handleClickOutside = (event) => {
            if (menuRef.current && !menuRef.current.contains(event.target)) {
                setIsOpen(false);
            }
        };

        if (isOpen) {
            document.addEventListener('mousedown', handleClickOutside);
        }

        return () => {
            document.removeEventListener('mousedown', handleClickOutside);
        };

    }, [isOpen])

    // بستن منو با دکمه  Escape
    useEffect(() => {
        const handleEscape = (event) => {
            if (event.key === 'Escape' && isOpen) {
                setIsOpen(false);
            }
        };

        document.addEventListener('keydown', handleEscape);
        return () => document.removeEventListener('keydown', handleEscape);
    }, [isOpen])

     const handleShareClick = () => {
        openModal('shareFolder', { fileName });
        setIsOpen(false);
    };

    const menuItems = [
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M9 12.5V9.5M9 6.5H9.0075M16.5 9.5C16.5 13.6421 13.1421 17 9 17C4.85786 17 1.5 13.6421 1.5 9.5C1.5 5.35786 4.85786 2 9 2C13.1421 2 16.5 5.35786 16.5 9.5Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Folder info',
            hasArrow: true,
            action: () => console.log('Folder info clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M8.99902 4.99988H4.49902C4.1012 4.99988 3.71967 5.15791 3.43836 5.43922C3.15706 5.72052 2.99902 6.10205 2.99902 6.49988V13.9999C2.99902 14.3977 3.15706 14.7792 3.43836 15.0605C3.71967 15.3418 4.1012 15.4999 4.49902 15.4999H11.999C12.3968 15.4999 12.7784 15.3418 13.0597 15.0605C13.341 14.7792 13.499 14.3977 13.499 13.9999V9.49988M8.24902 10.2499L14.999 3.49988M14.999 3.49988H11.249M14.999 3.49988V7.24988" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Open in',
            hasArrow: true,
            action: () => console.log('Open in clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M15.5935 9.95553C15.7766 9.79859 15.8682 9.72013 15.9017 9.62675C15.9311 9.5448 15.9311 9.45515 15.9017 9.3732C15.8682 9.27982 15.7766 9.20136 15.5935 9.04442L9.24047 3.59895C8.9253 3.32881 8.76772 3.19373 8.6343 3.19042C8.51835 3.18755 8.40759 3.23849 8.33432 3.3284C8.25 3.43185 8.25 3.6394 8.25 4.05451V7.27595C6.64899 7.55604 5.1837 8.36729 4.09478 9.58537C2.90762 10.9134 2.25093 12.6319 2.25 14.4132V14.8722C3.03701 13.9241 4.01963 13.1574 5.13057 12.6244C6.11002 12.1545 7.16881 11.8762 8.25 11.8029V14.9454C8.25 15.3605 8.25 15.5681 8.33432 15.6716C8.40759 15.7615 8.51835 15.8124 8.6343 15.8095C8.76772 15.8062 8.9253 15.6711 9.24047 15.401L15.5935 9.95553Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Share',
            action: handleShareClick
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M6.75 13.25H5.25C3.17893 13.25 1.5 11.5711 1.5 9.5C1.5 7.42893 3.17893 5.75 5.25 5.75H6.75M11.25 13.25H12.75C14.8211 13.25 16.5 11.5711 16.5 9.5C16.5 7.42893 14.8211 5.75 12.75 5.75H11.25M5.25 9.5L12.75 9.5" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Copy link',
            action: () => console.log('Copy link clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M6 16.2501V15.5001C6 15.1023 6.15804 14.7208 6.43934 14.4395C6.72064 14.1582 7.10217 14.0001 7.5 14.0001H10.5C10.8978 14.0001 11.2794 14.1582 11.5607 14.4395C11.842 14.7208 12 15.1023 12 15.5001V16.2501M12.75 8.00012H14.25C14.6478 8.00012 15.0294 8.15816 15.3107 8.43946C15.592 8.72077 15.75 9.1023 15.75 9.50012V10.2501M2.25 10.2501V9.50012C2.25 9.1023 2.40804 8.72077 2.68934 8.43946C2.97064 8.15816 3.35218 8.00012 3.75 8.00012H5.25M7.5 10.2501C7.5 10.6479 7.65804 11.0295 7.93934 11.3108C8.22064 11.5921 8.60217 11.7501 9 11.7501C9.39782 11.7501 9.77935 11.5921 10.0607 11.3108C10.342 11.0295 10.5 10.6479 10.5 10.2501C10.5 9.8523 10.342 9.47077 10.0607 9.18946C9.77935 8.90816 9.39782 8.75012 9 8.75012C8.60217 8.75012 8.22064 8.90816 7.93934 9.18946C7.65804 9.47077 7.5 9.8523 7.5 10.2501ZM11.25 4.25012C11.25 4.64795 11.408 5.02948 11.6893 5.31078C11.9706 5.59209 12.3522 5.75012 12.75 5.75012C13.1478 5.75012 13.5294 5.59209 13.8107 5.31078C14.092 5.02948 14.25 4.64795 14.25 4.25012C14.25 3.8523 14.092 3.47077 13.8107 3.18946C13.5294 2.90816 13.1478 2.75012 12.75 2.75012C12.3522 2.75012 11.9706 2.90816 11.6893 3.18946C11.408 3.47077 11.25 3.8523 11.25 4.25012ZM3.75 4.25012C3.75 4.64795 3.90804 5.02948 4.18934 5.31078C4.47064 5.59209 4.85218 5.75012 5.25 5.75012C5.64782 5.75012 6.02936 5.59209 6.31066 5.31078C6.59196 5.02948 6.75 4.64795 6.75 4.25012C6.75 3.8523 6.59196 3.47077 6.31066 3.18946C6.02936 2.90816 5.64782 2.75012 5.25 2.75012C4.85218 2.75012 4.47064 2.90816 4.18934 3.18946C3.90804 3.47077 3.75 3.8523 3.75 4.25012Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Manage permissions',
            action: () => console.log('Manage permissions clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M15.75 11.7501V12.6501C15.75 13.9102 15.75 14.5403 15.5048 15.0216C15.289 15.445 14.9448 15.7892 14.5215 16.0049C14.0402 16.2501 13.4101 16.2501 12.15 16.2501H5.85C4.58988 16.2501 3.95982 16.2501 3.47852 16.0049C3.05516 15.7892 2.71095 15.445 2.49524 15.0216C2.25 14.5403 2.25 13.9102 2.25 12.6501V11.7501M12.75 8.00012L9 11.7501M9 11.7501L5.25 8.00012M9 11.7501V2.75012" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Download folder',
            action: () => console.log('Download folder clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M9.36225 16.2014C8.71575 16.3806 7.93875 16.0679 7.74375 15.2624C7.69581 15.0645 7.60183 14.8808 7.46947 14.7261C7.3371 14.5715 7.17008 14.4502 6.98201 14.3723C6.79394 14.2944 6.59013 14.262 6.38716 14.2777C6.1842 14.2935 5.98781 14.3569 5.814 14.4629C4.65675 15.1679 3.3315 13.8434 4.0365 12.6854C4.14233 12.5116 4.20566 12.3154 4.22136 12.1125C4.23706 11.9097 4.20468 11.706 4.12685 11.5181C4.04903 11.3301 3.92795 11.1632 3.77345 11.0308C3.61896 10.8985 3.43542 10.8044 3.23775 10.7564C1.92075 10.4369 1.92075 8.56337 3.23775 8.24387C3.4356 8.19593 3.61933 8.10196 3.774 7.96959C3.92867 7.83722 4.04989 7.67021 4.12781 7.48213C4.20573 7.29406 4.23814 7.09025 4.2224 6.88728C4.20667 6.68432 4.14323 6.48794 4.03725 6.31412C3.33225 5.15687 4.65675 3.83162 5.81475 4.53662C6.56475 4.99262 7.53675 4.58912 7.74375 3.73787C8.06325 2.42087 9.93675 2.42087 10.2563 3.73787C10.3042 3.93572 10.3982 4.11946 10.5305 4.27412C10.6629 4.42879 10.8299 4.55001 11.018 4.62793C11.2061 4.70585 11.4099 4.73826 11.6128 4.72252C11.8158 4.70679 12.0122 4.64335 12.186 4.53737C13.3432 3.83237 14.6685 5.15687 13.9635 6.31487C13.8577 6.48861 13.7943 6.68487 13.7786 6.8877C13.7629 7.09053 13.7953 7.2942 13.8731 7.48216C13.951 7.67011 14.0721 7.83706 14.2265 7.96941C14.381 8.10177 14.5646 8.1958 14.7623 8.24387C15.5723 8.44037 15.8843 9.22487 15.6975 9.87362M12 14.7501H16.5M14.25 12.5001V17.0001M6.75 9.50012C6.75 10.0969 6.98705 10.6692 7.40901 11.0911C7.83097 11.5131 8.40326 11.7501 9 11.7501C9.59674 11.7501 10.169 11.5131 10.591 11.0911C11.0129 10.6692 11.25 10.0969 11.25 9.50012C11.25 8.90338 11.0129 8.33109 10.591 7.90913C10.169 7.48717 9.59674 7.25012 9 7.25012C8.40326 7.25012 7.83097 7.48717 7.40901 7.90913C6.98705 8.33109 6.75 8.90338 6.75 9.50012Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Add automation',
            action: () => console.log('Add automation clicked')
        },
        // خط جداکننده
        { divider: true },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M9.75 5.75012H3.9C3.05992 5.75012 2.63988 5.75012 2.31901 5.91361C2.03677 6.05742 1.8073 6.28689 1.66349 6.56914C1.5 6.89 1.5 7.31004 1.5 8.15012V10.8501C1.5 11.6902 1.5 12.1102 1.66349 12.4311C1.8073 12.7134 2.03677 12.9428 2.31901 13.0866C2.63988 13.2501 3.05992 13.2501 3.9 13.2501H9.75M12.75 5.75012H14.1C14.9401 5.75012 15.3601 5.75012 15.681 5.91361C15.9632 6.05742 16.1927 6.28689 16.3365 6.56914C16.5 6.89 16.5 7.31004 16.5 8.15012V10.8501C16.5 11.6902 16.5 12.1102 16.3365 12.4311C16.1927 12.7134 15.9632 12.9428 15.681 13.0866C15.3601 13.2501 14.9401 13.2501 14.1 13.2501H12.75M12.75 16.2501L12.75 2.75012M14.625 2.75013L10.875 2.75012M14.625 16.2501L10.875 16.2501" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Rename',
            action: () => console.log('Rename clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M12 12.5V14.6C12 15.4401 12 15.8601 11.8365 16.181C11.6927 16.4632 11.4632 16.6927 11.181 16.8365C10.8601 17 10.4401 17 9.6 17H3.9C3.05992 17 2.63988 17 2.31901 16.8365C2.03677 16.6927 1.8073 16.4632 1.66349 16.181C1.5 15.8601 1.5 15.4401 1.5 14.6V8.9C1.5 8.05992 1.5 7.63988 1.66349 7.31901C1.8073 7.03677 2.03677 6.8073 2.31901 6.66349C2.63988 6.5 3.05992 6.5 3.9 6.5H6M8.4 12.5H14.1C14.9401 12.5 15.3601 12.5 15.681 12.3365C15.9632 12.1927 16.1927 11.9632 16.3365 11.681C16.5 11.3601 16.5 10.9401 16.5 10.1V4.4C16.5 3.55992 16.5 3.13988 16.3365 2.81901C16.1927 2.53677 15.9632 2.3073 15.681 2.16349C15.3601 2 14.9401 2 14.1 2H8.4C7.55992 2 7.13988 2 6.81901 2.16349C6.53677 2.3073 6.3073 2.53677 6.16349 2.81901C6 3.13988 6 3.55992 6 4.4V10.1C6 10.9401 6 11.3601 6.16349 11.681C6.3073 11.9632 6.53677 12.1927 6.81901 12.3365C7.13988 12.5 7.55992 12.5 8.4 12.5Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Copy folder',
            action: () => console.log('Copy folder clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M3.75 7.25L1.5 9.5M1.5 9.5L3.75 11.75M1.5 9.5H16.5M6.75 4.25L9 2M9 2L11.25 4.25M9 2V17M11.25 14.75L9 17M9 17L6.75 14.75M14.25 7.25L16.5 9.5M16.5 9.5L14.25 11.75" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Move',
            action: () => console.log('Move clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M2.99902 5.75012H14.999M7.49902 8.75012V13.2501M10.499 8.75012V13.2501M3.74902 5.75012L4.49902 14.7501C4.49902 15.1479 4.65706 15.5295 4.93836 15.8108C5.21967 16.0921 5.6012 16.2501 5.99902 16.2501H11.999C12.3968 16.2501 12.7784 16.0921 13.0597 15.8108C13.341 15.5295 13.499 15.1479 13.499 14.7501L14.249 5.75012M6.74902 5.75012V3.50012C6.74902 3.30121 6.82804 3.11044 6.96869 2.96979C7.10935 2.82914 7.30011 2.75012 7.49902 2.75012H10.499C10.6979 2.75012 10.8887 2.82914 11.0294 2.96979C11.17 3.11044 11.249 3.30121 11.249 3.50012V5.75012" stroke="#BC1828" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Delete',
            textColor: 'text-red-500',
            action: () => console.log('Delete clicked')
        },
        // خط جداکننده
        { divider: true },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M8.46199 3.09005C8.63485 2.73984 8.72128 2.56474 8.83862 2.5088C8.94071 2.46012 9.05931 2.46012 9.1614 2.5088C9.27874 2.56474 9.36517 2.73984 9.53804 3.09005L11.178 6.41252C11.2291 6.51591 11.2546 6.56761 11.2919 6.60774C11.3249 6.64328 11.3645 6.67207 11.4085 6.69253C11.4582 6.71563 11.5152 6.72397 11.6293 6.74064L15.2977 7.27684C15.684 7.3333 15.8772 7.36154 15.9666 7.45589C16.0444 7.53798 16.0809 7.65078 16.0661 7.76289C16.0491 7.89174 15.9093 8.02795 15.6296 8.30035L12.9761 10.8849C12.8934 10.9654 12.852 11.0057 12.8253 11.0537C12.8017 11.0961 12.7865 11.1427 12.7807 11.1909C12.7741 11.2454 12.7838 11.3023 12.8034 11.4161L13.4295 15.0666C13.4955 15.4517 13.5285 15.6442 13.4665 15.7584C13.4125 15.8578 13.3165 15.9275 13.2053 15.9482C13.0775 15.9719 12.9046 15.8809 12.5588 15.6991L9.27928 13.9744C9.1771 13.9207 9.12601 13.8938 9.07218 13.8833C9.02452 13.8739 8.9755 13.8739 8.92784 13.8833C8.87402 13.8938 8.82293 13.9207 8.72074 13.9744L5.44119 15.6991C5.09544 15.8809 4.92256 15.9719 4.79473 15.9482C4.68351 15.9275 4.58754 15.8578 4.53355 15.7584C4.4715 15.6442 4.50452 15.4517 4.57056 15.0666L5.19666 11.4161C5.21618 11.3023 5.22594 11.2454 5.21934 11.1909C5.21349 11.1427 5.19833 11.0961 5.1747 11.0537C5.14802 11.0057 5.10666 10.9654 5.02394 10.8849L2.37042 8.30035C2.09075 8.02795 1.95091 7.89174 1.93389 7.76289C1.91909 7.65078 1.95567 7.53798 2.03344 7.45589C2.12283 7.36154 2.31598 7.3333 2.70228 7.27684L6.37073 6.74064C6.48482 6.72397 6.54186 6.71563 6.59154 6.69253C6.63552 6.67207 6.67512 6.64328 6.70814 6.60774C6.74543 6.56761 6.77095 6.51591 6.82198 6.41252L8.46199 3.09005Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Star',
            action: () => console.log('Star clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M9.00105 11.75L9.00106 17M6.00105 5.9811V7.57906C6.00105 7.73508 6.00105 7.81308 5.98574 7.8877C5.97216 7.95389 5.94969 8.01795 5.91894 8.07813C5.88429 8.14596 5.83556 8.20687 5.7381 8.3287L4.56076 9.80037C4.06146 10.4245 3.81181 10.7366 3.81152 10.9992C3.81128 11.2276 3.91513 11.4437 4.09363 11.5862C4.29889 11.75 4.69853 11.75 5.4978 11.75H12.5043C13.3036 11.75 13.7032 11.75 13.9085 11.5862C14.087 11.4437 14.1908 11.2276 14.1906 10.9992C14.1903 10.7366 13.9407 10.4245 13.4413 9.80037L12.264 8.3287C12.1666 8.20687 12.1178 8.14596 12.0832 8.07813C12.0524 8.01795 12.03 7.95389 12.0164 7.8877C12.0011 7.81308 12.0011 7.73508 12.0011 7.57906V5.9811C12.0011 5.89476 12.0011 5.85158 12.0059 5.80901C12.0103 5.77119 12.0175 5.73375 12.0275 5.69702C12.0388 5.65568 12.0548 5.6156 12.0869 5.53543L12.8428 3.64567C13.0633 3.09435 13.1736 2.8187 13.1276 2.59741C13.0874 2.4039 12.9724 2.23408 12.8077 2.12488C12.6193 2 12.3224 2 11.7286 2H6.27349C5.67971 2 5.38282 2 5.19444 2.12488C5.0297 2.23408 4.91473 2.4039 4.87452 2.59741C4.82853 2.8187 4.9388 3.09435 5.15932 3.64567L5.91523 5.53543C5.94729 5.6156 5.96333 5.65568 5.97461 5.69702C5.98463 5.73375 5.99184 5.77119 5.99617 5.80901C6.00105 5.85158 6.00105 5.89476 6.00105 5.9811Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Pin to NexFile',
            action: () => console.log('Pin to NexFile clicked')
        },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M1.81412 10.0349C1.71198 9.87315 1.66091 9.79229 1.63232 9.66756C1.61084 9.57387 1.61084 9.42613 1.63232 9.33244C1.66091 9.20771 1.71198 9.12685 1.81412 8.96512C2.65817 7.62863 5.17057 4.25 8.99933 4.25C12.8281 4.25 15.3405 7.62863 16.1845 8.96512C16.2867 9.12685 16.3377 9.20771 16.3663 9.33244C16.3878 9.42613 16.3878 9.57387 16.3663 9.66756C16.3377 9.79229 16.2867 9.87315 16.1845 10.0349C15.3405 11.3714 12.8281 14.75 8.99933 14.75C5.17057 14.75 2.65817 11.3714 1.81412 10.0349Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8.99933 11.75C10.242 11.75 11.2493 10.7426 11.2493 9.5C11.2493 8.25736 10.242 7.25 8.99933 7.25C7.75669 7.25 6.74933 8.25736 6.74933 9.5C6.74933 10.7426 7.75669 11.75 8.99933 11.75Z" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Show pinned items',
            action: () => console.log('Show pinned items clicked')
        },
        // خط جداکننده
        { divider: true },
        {
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <path d="M16.5 9.5H13.5L11.25 16.25L6.75 2.75L4.5 9.5H1.5" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
            ),
            title: 'Folder activity',
            hasArrow: true,
            action: () => console.log('Folder activity clicked')
        }
    ]

    const handleItemClick = (item) => {
        if (item.action) {
            item.action();
        }

        setIsOpen(false);
    }

  

    return (
        <div className="relative" ref={menuRef}>
            {/* Action Button */}
            <button
                onClick={toggleMenu}
                className='flex items-center justify-center w-8 h-8 p-1 gap-2.5 shadow-custom border border-[#F2F2F3] bg-white rounded cursor-pointer hover:bg-gray-50 transition-colors'
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="4" height="12" viewBox="0 0 4 12" fill="none">
                    <path d="M3.33337 1.33333C3.33337 0.6 2.73337 0 2.00004 0C1.26671 0 0.666708 0.6 0.666708 1.33333C0.666708 2.06667 1.26671 2.66667 2.00004 2.66667C2.73337 2.66667 3.33337 2.06667 3.33337 1.33333Z" fill="#2E2E37" />
                    <path d="M3.33337 10.6666C3.33337 9.93325 2.73337 9.33325 2.00004 9.33325C1.26671 9.33325 0.666708 9.93325 0.666708 10.6666C0.666708 11.3999 1.26671 11.9999 2.00004 11.9999C2.73337 11.9999 3.33337 11.3999 3.33337 10.6666Z" fill="#2E2E37" />
                    <path d="M3.33337 6.00008C3.33337 5.26675 2.73337 4.66675 2.00004 4.66675C1.26671 4.66675 0.666708 5.26675 0.666708 6.00008C0.666708 6.73341 1.26671 7.33341 2.00004 7.33341C2.73337 7.33341 3.33337 6.73341 3.33337 6.00008Z" fill="#2E2E37" />
                </svg>
            </button>

            {/* Menu Dropdown */}
            {isOpen && (
                <div className="flex flex-col justify-center items-center w-[285px] shadow-dropdown border border-[#F2F2F3] bg-white p-2 gap-2 rounded-lg absolute -right-4 -bottom-[50px] z-[9999]">
                    {/* Header */}
                    <div className="flex items-center gap-2.5 px-2 py-1 self-stretch">
                        <p className="text-medium-14">Design File</p>
                    </div>

                    {/* Menu Items */}
                    {menuItems.map((item, index) => {
                        if (item.divider) {
                            return (
                                <svg key={index} xmlns="http://www.w3.org/2000/svg" width="285" height="2" viewBox="0 0 285 2" fill="none">
                                    <path d="M0.00195312 1H284.998" stroke="#F2F2F3" strokeWidth="1.2" />
                                </svg>
                            );
                        }

                        return (
                            <button
                                key={index}
                                onClick={() => handleItemClick(item)}
                                className={`flex items-center w-full p-2 gap-3 bg-white/8   hover:bg-gray-50 transition-colors ${item.textColor || 'text-gray-700'
                                    }`}
                            >
                                <div className="w-4 h-4 mr-3 flex-shrink-0">
                                    {item.icon}
                                </div>
                                <span className="flex-1 text-regular-14 text-left">{item.title}</span>
                                {item.hasArrow && (
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                        <path d="M6 12.5L10 8.5L6 4.5" stroke="#737379" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" />
                                    </svg>
                                )}
                            </button>
                        );
                    })}
                </div>
            )}
        </div>
    );
}

export default FileActionMenu